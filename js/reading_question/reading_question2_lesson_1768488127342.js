// ===============================================================================================================
// ////////////// DANH SÁCH CÂU HỎI PART 2 & 3 ///////////////
// ===============================================================================================================

// READING ĐỀ 4 - Question 2 - Topic: My first car
const question2Content_1 = [
    'I have just passed the test, and I am the proud owner of the driving license',
    'However, I did not have a car and my parents would not let me drive theirs',
    'So, when I saw an advertisement in the local newspaper for a cheap second-hand car, I did not waste time',
    'I called the number in that advert and arranged a meeting to meet the owner on the other side of the town',
    'We agreed on a price and when I handed over the money, he gave me the keys.',
];

// READING ĐỀ 4 - Question 3 - Topic: Enter the conference hall 3
const question2Content_2 = [
    'Go to security desk',
    'Show confirming letter to security guard',
    'After security check, you receive visitor\'s pass',
    'Enter the conference',
    'You can welcome…',
];

// READING ĐỀ 3 - Question 2 - Topic: Enter the conference hall 2
const question2Content_3 = [
    'When you collect you pack, go to the lifts on the right',
    'Take the lift to the third floor and go to the main desk',
    'Show your pass from the conference pack to a member of staff at the desk',
    'He or she will tell you your seat number for the talk at the main hall',
    'Once you are in the hall, someone will help you find your seat',
];

// READING ĐỀ 3 - Question 3 - Topic: Natural history center
const question2Content_4 = [
    'The most important of these is the Natural history center',
    'The entrance of the center is on the town\'s main square.',
    'When you enter the building from the square, you will see a set of stairs to your left',
    'The ticket office is on the top of these stairs, the staff there are very helpful.',
    'As well as selling tickets, they can provide maps and useful tour information.',
];

// READING ĐỀ 2 - Question 2 - Topic: Quy trình vào animal hospital
const question2Content_5 = [
    'When you arrive, go straight to the main office to collect your ticket',
    'You will need to show this to a member of staff at the door before you enter',
    'Inside the building, you will find a photography exhibition on the ground floor',
    'Before you look at the pictures, a guide will tell you about the day’s event',
    'These activities will include playing and feeding the animals.',
];

// READING ĐỀ 2 - Question 3 - Topic: A famous football player
const question2Content_6 = [
    'When he was a child, he played for some local teams near his home in Marseille',
    'He then moved away from his home to join Cannes Football Club in the southern France',
    'While he was at that club, people throughout France saw that he was a brilliant player.',
    'After that, he moved to Italy and Spain, where he finished his playing career',
    'Since he retired from playing, he has worked as a football club manager.',
];

// READING ĐỀ 1 - Question 2 - Topic: Diễn viên nổi tiếng Jay
const question2Content_7 = [
    'They left their home country and took Jay to live in the United States',
    'He started study at the school in that country, and in his free time he did some strength exercise',
    'Jay was very good at that and he participated in a bodybuilding competition',
    'At one of these events, an actor agent saw him and gave him a starring role',
    'It was a major action movie and he gained famous from that film',
];

// READING ĐỀ 1 - Question 3 - Topic: Quy trình trồng khoai
const question2Content_8 = [
    'All you need is some earth, an old potato and a big spot',
    'An old potato will have little roots, will be a little green, and won\'t be good for eating',
    'This color means it is perfect for growing, you should put some earth in the pot and dig it deep down',
    'When you\'ve done this, you should water it everyday and place it in a sunny spot',
    'With this care, you should see a potato plant growing after couples of weeks',
];

// READING ĐỀ 17 - Question 2 - Topic: Famous singer (1)
const question2Content_9 = [
    'He is a famous singer who is loved by many people.',
    'Before becoming famous, he studied music at a school when he was 15 years old.',
    'He spent many years practicing and learning how to perform.',
    'His clothing style and performance on stage were very unique.',
    'Because of that, more and more people started to recognize him.',
];

// READING ĐỀ 17 - Question 3 - Topic: Movies now and then
const question2Content_10 = [
    'Movies today are very different from movies in the past',
    'In the old days, films were only in black and white, and sometimes even without sound.',
    'In addition to these technological limits, producers had very low budgets.',
    'Because of the lack of money, actors also earn little money from acting.',
    'Nowadays, everything has changed: actors and producers can earn a lot of money from producing films.',
];

// READING ĐỀ 16 - Question 2 - Topic: New coffee shop (3)
const question2Content_11 = [
    'When I arrived, the place was very crowded, and the staff were extremely busy on the first day.',
    'Even though it was crowded, the staff still managed to find a table for me.',
    'They handed me the menu, and when I looked through it, I saw quite a variety of dishes.',
    'After checking them all, I decided to order the most expensive sandwich.',
    'It tasted really good with melted cheese on top, and I’ll definitely come back to this place again.',
];

// READING ĐỀ 16 - Question 3 - Topic: Healthy eating
const question2Content_12 = [
    'In the past, many meals were high in sugar and unhealthy fats.',
    'Years ago, limited access to fresh produce made healthy eating much more challenging.',
    'Modern diets now emphasize fresh, whole foods instead of processed ones.',
    'Nutritionists today teach people how to create balanced and nutritious meal plans.',
    'Nowadays, mobile apps help users track calories and discover healthy recipes to support better lifestyles.',
];

// READING ĐỀ 15 - Question 2 - Topic: Tourism
const question2Content_13 = [
    'Modern tourism now provides far more choices than in the past.',
    'In earlier times, travelers mostly depended on guidebooks and paper maps.',
    'Back then, limited technology also meant that booking options were quite restricted.',
    'Today, online platforms allow people to plan thoroughly and book their trips with ease.',
    'Moreover, local guides now offer personalized tours that give visitors more authentic experiences.',
];

// READING ĐỀ 15 - Question 3 - Topic: Work
const question2Content_14 = [
    'The company offers flexible working hours to better support employees’ schedules.',
    'Her white desk stands out in the shared open office.',
    'She uses a planner to organize her tasks throughout the shorter workweek.',
    'At lunchtime, she enjoys a homemade sandwich prepared with fresh ingredients.',
    'In the evenings, they unwind by reading books on productivity and well-being.',
];

// READING ĐỀ 14 - Question 2 - Topic: End of term project
const question2Content_15 = [
    'They all have studied several chapters of local history.',
    'Your end-of-term project should focus on at least two of the given topics.',
    'It must include relevant pictures along with your own written text about the subject.',
    'You will then use these pictures and your written work to create a class presentation.',
    'During the presentation, you should summarize your main points, and it should last about five minutes.',
    'Afterward, your classmates will have the opportunity to ask questions, and you will respond to them.',
];

// READING ĐỀ 14 - Question 3 - Topic: Busy coffee shop
const question2Content_16 = [
    'The café was very crowded when the customer arrived.',
    'The staff helped them find a table and handed them a menu.',
    'The customer was surprised because the menu was different from what they had expected.',
    'They decided to order the most expensive item — a sandwich.',
    'The customer said the sandwich was delicious and that they would definitely come back again.',
];

// READING ĐỀ 13 - Question 2 - Topic: Chưa có topic
const question2Content_17 = [
    'In the past, most workers followed fixed schedules from nine to five.',
    'Because technology was limited, working from home was almost impossible.',
    'Modern offices are now moving toward more flexible ways of working.',
    'Managers now use digital tools to follow project progress remotely.',
    'Many companies today are trying shorter workweeks to increase efficiency.',
];

// READING ĐỀ 13 - Question 3 - Topic: IoT (Internet of Things)
const question2Content_18 = [
    'The Internet of Things (IoT) links everyday devices to improve their capabilities.',
    'Early loT devices faced limitations due to slow internet speeds and compatibility challenges.',
    'High development costs previously slowed the widespread adoption of lot technology.',
    'Nowadays, engineers create smart devices for both residential and industrial applications.',
    'Modern loT systems provide real- time data tracking and automation features.',
];

// READING ĐỀ 12 - Question 2 - Topic: Mae - The Math girl
const question2Content_19 = [
    'Mae’s father worked as a nurse, and her mother was a teacher.',
    'Her parents motivated Mae to pursue higher education and focus on scientific studies.',
    'Mae worked diligently and achieved several remarkable milestones.',
    'She later joined a team, contributing her skills and knowledge.',
    'Eventually, she had the opportunity to undergo a training program in the United States.',
];

// READING ĐỀ 12 - Question 3 - Topic: A group presentation
const question2Content_20 = [
    'First, we prepared the materials for our group presentation.',
    'Then, we presented our topic for 10 minutes.',
    'Throughout the presentation, we used images to explain our ideas.',
    'After the presentation, other students asked questions.',
    'Finally, each group member took turns answering the questions.',
];

// READING ĐỀ 11 - Question 2 - Topic: The first American woman in space
const question2Content_21 = [
    'Encouraged by her parents, she decided to study science at university.',
    'Her strong academic record earned her a place in a training program in the United States.',
    'Her passion for space led Mae to join a dedicated research team.',
    'As a member of the team, she traveled into space and carried out numerous experiments.',
    'Some of these experiments involved growing plants and observing animals aboard the spacecraft.',
];

// READING ĐỀ 11 - Question 3 - Topic: Social media
const question2Content_22 = [
    'In the past, slow internet speeds made streaming or uploading videos difficult.',
    'Early platforms offered only basic features like text posts and simple images.',
    'Over time, social media platforms have greatly evolved in both design and functionality.',
    'Today\'s platforms use complex algorithms to personalize and shape each user\'s feed.',
    'Many influencers now earn income primarily through brand sponsorships and online ads.',
];

// READING ĐỀ 10 - Question 2 - Topic: Artificial Intelligence
const question2Content_23 = [
    'Over the past decade, artificial intelligence has revolutionized various industries.',
    'The early Al systems were limited to simple pattern recognition tasks.',
    'High computational costs previously hindered the development of Al.',
    'Nowadays, Al engineers build advanced models for complex tasks such as language translation.',
    'Modern AI tools help businesses to analyze data and make better decisions.',
];

// READING ĐỀ 10 - Question 3 - Topic: Music show at the park
const question2Content_24 = [
    'The event was fully planned, financed, and supported by local authorities.',
    'As a result, entry was free, and around five thousand people attended.',
    'Many attendees arrived early and browsed local shops before the event began.',
    'Despite the busy day, workers finished ahead of schedule and watched the famous singer perform.',
    'The two-hour performance thrilled the audience, leaving everyone in high spirits.',
];

// READING ĐỀ 9 - Question 2 - Topic: Public Transportation (2)
const question2Content_25 = [
    'Due to budget limitations, many cities had fewer bus routes in the past.',
    'Older buses often lacked air conditioning and comfortable seats.',
    'City buses today are more efficient than those from a decade ago.',
    'Modern buses often use electric power, reducing pollution in urban areas.',
    'Drivers and staff now receive better training to assist passengers.',
];

// READING ĐỀ 9 - Question 3 - Topic: Neighborhood Festival
const question2Content_26 = [
    'The festival was held on Friday evening, featuring live music performances.',
    'Around 100 people attended, with Ms. Carter leading the organizing team.',
    'Activities included dance workshops, art displays, and a pet parade.',
    'After the performances, awards were given for the best food stall.',
    'Families stayed late, enjoying food and drinks under colorful lights.',
];

// READING ĐỀ 8 - Question 2 - Topic: Company wellness day
const question2Content_27 = [
    'This month, the wellness day took place on Friday, focusing on work-life balance.',
    'More than 50 employees participated, with Mr. Khan leading a workshop on stress relief.',
    'Activities included team yoga, time management seminars, and a group walk.',
    'After the workshops, awards were given for the most creative wellness ideas.',
    'Employees enjoyed healthy snacks and exchanged tips for managing stress.',
];

// READING ĐỀ 8 - Question 3 - Topic: Workplace evolution
const question2Content_28 = [
    'Flexible work models are becoming more common in modern workplaces.',
    'Previously, employees were confined to rigid nine-to-five work hours.',
    'Technological restrictions once made remote work a challenge.',
    'Managers now utilize software to monitor project progress remotely.',
    'Today, businesses are exploring shorter workweeks to boost productivity.',
];

// READING ĐỀ 7 - Question 2 - Topic: A new cafe (1)
const question2Content_29 = [
    'Last week, I went to a new opening cafe on Corner Street',
    'When I was there, it was very crowded and the staff were very busy on the first day.',
    'Although it was busy, the staff still arranged a table for me.',
    'They gave me the menu and when I looked at it, I saw quite a few dishes.',
    'I chose the most expensive sandwich.',
    'It tasted quite good and I will definitely go back to this place.',
];

// READING ĐỀ 7 - Question 3 - Topic: Famous singer (2)
const question2Content_30 = [
    'He is a famous singer who is loved by many fans.',
    'At the age of fifteen, he studied music at a special school.',
    'Before becoming famous, he had to practice very hard every day.',
    'With his unique style and clothes, he soon attracted attention.',
    'Thanks to his talent and personality, he became well- known to a large audience.',
];

// READING ĐỀ 6 - Question 2 - Topic: Films
const question2Content_31 = [
    'Old movies were very different from today\'s movies.',
    'That\'s because the movies were only in black and white, and sometimes without sound.',
    'Not only did these technological limitations exist, the movies were also low budget.',
    'Due to the lack of money, actors also had few opportunities to earn money through acting.',
    'Now things have changed, actors and filmmakers can earn thousands of dollars from film production.',
];

// READING ĐỀ 6 - Question 3 - Topic: Weekend activities
const question2Content_32 = [
    'It was held on Saturday morning, there was a 10 km race for adults.',
    'There were 60 participants, in which Ms. Kamus kept the fastest speed and won.',
    'After she received the prize, the following time was for children\'s activities.',
    'Activities including football, swimming, skipping rope, and the children played together very happily.',
    'After playing, the children were very hungry and ate with their parents.',
];

// READING ĐỀ 5 - Question 2 - Topic: Writing about a place
const question2Content_33 = [
    'Before writing about a place, you need to do some research on it.',
    'It is important to learn about the people and the history there carefully.',
    'Even if you can not visit the place, your writing will still look similar to real experiences.',
    'You should also compare that place with your own country.',
    'Such comparisons will make your writing more interesting and meaningful.',
];

// READING ĐỀ 5 - Question 3 - Topic: Public transportation (1)
const question2Content_34 = [
    'In the past, transportation was only available to the rich',
    'Then, fast air travel became popular among business people',
    'Later, buses and trains were introduced as cheaper alternatives',
    'They made transportation more convenient for everyone',
    'Today, buses and trains are two of the most common forms of transport.',
];

const questionSets = [
    question2Content_1,
    question2Content_2,
    question2Content_3,
    question2Content_4,
    question2Content_5,
    question2Content_6,
    question2Content_7,
    question2Content_8,
    question2Content_9,
    question2Content_10,
    question2Content_11,
    question2Content_12,
    question2Content_13,
    question2Content_14,
    question2Content_15,
    question2Content_16,
    question2Content_17,
    question2Content_18,
    question2Content_19,
    question2Content_20,
    question2Content_21,
    question2Content_22,
    question2Content_23,
    question2Content_24,
    question2Content_25,
    question2Content_26,
    question2Content_27,
    question2Content_28,
    question2Content_29,
    question2Content_30,
    question2Content_31,
    question2Content_32,
    question2Content_33,
    question2Content_34,
];

window.questionSets = questionSets;

const questheader1 = {
    question2Content_1: "My first car",
    question2Content_2: "Enter the conference hall 3",
    question2Content_3: "Enter the conference hall 2",
    question2Content_4: "Natural history center",
    question2Content_5: "Quy trình vào animal hospital",
    question2Content_6: "A famous football player",
    question2Content_7: "Diễn viên nổi tiếng Jay",
    question2Content_8: "Quy trình trồng khoai",
    question2Content_9: "Famous singer (1)",
    question2Content_10: "Movies now and then",
    question2Content_11: "New coffee shop (3)",
    question2Content_12: "Healthy eating",
    question2Content_13: "Tourism",
    question2Content_14: "Work",
    question2Content_15: "End of term project",
    question2Content_16: "Busy coffee shop",
    question2Content_17: "Chưa có topic",
    question2Content_18: "IoT (Internet of Things)",
    question2Content_19: "Mae - The Math girl",
    question2Content_20: "A group presentation",
    question2Content_21: "The first American woman in space",
    question2Content_22: "Social media",
    question2Content_23: "Artificial Intelligence",
    question2Content_24: "Music show at the park",
    question2Content_25: "Public Transportation (2)",
    question2Content_26: "Neighborhood Festival",
    question2Content_27: "Company wellness day",
    question2Content_28: "Workplace evolution",
    question2Content_29: "A new cafe (1)",
    question2Content_30: "Famous singer (2)",
    question2Content_31: "Films",
    question2Content_32: "Weekend activities",
    question2Content_33: "Writing about a place",
    question2Content_34: "Public transportation (1)",
};

function getQuestHeaders(obj) {
    return Object.values(obj);
}

const questheader = getQuestHeaders(questheader1);
window.questionSets = questionSets;
window.questheader = questheader;

let currentSetIndex = 0;
let correctAnswersQuestion2 = [];

function shuffleQuestions(questions) {
  for (let i = questions.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1));
    [questions[i], questions[j]] = [questions[j], questions[i]];
  }
  return questions;
}

function initSortable() {
  const cardsContainer = document.getElementById('cardsContainer');
  if (!cardsContainer) {
    console.error('cardsContainer not found');
    return;
  }
  // Check if Sortable is available
  if (typeof Sortable === 'undefined') {
    console.error('SortableJS is not loaded. Please ensure sortablejs library is included.');
    // Try to wait a bit and retry
    setTimeout(function() {
      if (typeof Sortable !== 'undefined') {
        initSortable();
      } else {
        console.error('SortableJS still not available after retry');
      }
    }, 500);
    return;
  }
  // Destroy existing Sortable instance if any
  if (cardsContainer.sortableInstance) {
    cardsContainer.sortableInstance.destroy();
    cardsContainer.sortableInstance = null;
  }
  // Create new Sortable instance
  // Only allow dragging items with class 'draggable-item' (excludes first item)
  try {
    const sortable = new Sortable(cardsContainer, {
      animation: 150,
      draggable: '.draggable-item',
      filter: function(evt, item) {
        // Prevent dragging first child (which doesn't have draggable-item class)
        return item === cardsContainer.firstElementChild;
      },
      preventOnFilter: true,
      forceFallback: false,
      swapThreshold: 0.65,
      ghostClass: 'sortable-ghost',
      chosenClass: 'sortable-chosen'
    });
    // Store instance for later cleanup
    cardsContainer.sortableInstance = sortable;
    console.log('Sortable initialized successfully');
  } catch (error) {
    console.error('Error initializing Sortable:', error);
  }
}

function renderQuestion2(questionlist) {
  correctAnswersQuestion2 = [];
  questionlist.forEach(item => { correctAnswersQuestion2.push(item); });
  // Keep first sentence fixed at index 0, shuffle the rest
  const firstSentence = questionlist[0];
  const restSentences = questionlist.slice(1);
  const shuffledRest = shuffleQuestions([...restSentences]);
  const shuffledQuestionlist = [firstSentence, ...shuffledRest];
  const cardsContainer = document.getElementById('cardsContainer');
  if (cardsContainer) {
    cardsContainer.innerHTML = '';
    shuffledQuestionlist.forEach((text, index) => {
      const cardDiv = document.createElement('div');
      if (index === 0) {
        // First sentence: fixed, not draggable, with checkmark and highlight
        cardDiv.classList.add('card', 'mb-2');
        cardDiv.style.backgroundColor = '#e3f2fd';
        cardDiv.style.border = '2px solid #1976d2';
        cardDiv.style.cursor = 'default';
        const cardBody = document.createElement('div');
        cardBody.classList.add('card-body', 'd-flex', 'align-items-center');
        const checkIcon = document.createElement('i');
        checkIcon.classList.add('bi', 'bi-check-circle-fill', 'text-success', 'me-2');
        checkIcon.style.fontSize = '1.2rem';
        cardBody.appendChild(checkIcon);
        const textSpan = document.createElement('span');
        textSpan.innerText = text;
        cardBody.appendChild(textSpan);
        cardDiv.appendChild(cardBody);
      } else {
        // Other sentences: draggable
        cardDiv.classList.add('card', 'mb-2', 'draggable-item');
        // Don't set draggable attribute - SortableJS handles dragging
        cardDiv.id = 'item' + (index + 1);
        const cardBody = document.createElement('div');
        cardBody.classList.add('card-body', 'd-flex', 'align-items-center');
        const dragIcon = document.createElement('i');
        dragIcon.classList.add('bi', 'bi-grip-vertical', 'me-2', 'text-muted');
        dragIcon.style.fontSize = '1.2rem';
        cardBody.appendChild(dragIcon);
        const textSpan = document.createElement('span');
        textSpan.innerText = text;
        cardBody.appendChild(textSpan);
        cardDiv.appendChild(cardBody);
      }
      cardsContainer.appendChild(cardDiv);
    });
    // Initialize Sortable after a short delay to ensure DOM is ready and SortableJS is loaded
    setTimeout(function() {
      initSortable();
    }, 200);
  }
  const headerEl = document.getElementById('html_questheader');
  if (headerEl) headerEl.textContent = 'Reading Question 2 & 3 ( ' + (currentSetIndex + 1) + ' / ' + questheader.length + ' )';
  const topicEl = document.getElementById('question2_topic');
  if (topicEl) topicEl.textContent = 'Topic: ' + questheader[currentSetIndex];
}
// Expose renderQuestion2 to window
window.renderQuestion2 = renderQuestion2;

// User answers array
const userAnswersQuestion2 = [];
let question2Score = 0;

// Check result button handler
document.getElementById('checkResultButton').addEventListener('click', function() {
  userAnswersQuestion2.length = 0;
  const cardsContainer = document.getElementById('cardsContainer');
  // Get all cards including the first one (which is not draggable)
  const cards = cardsContainer.querySelectorAll('.card');
  cards.forEach((card) => {
    // Get text content, removing icon text if present
    const cardBody = card.querySelector('.card-body');
    if (cardBody) {
      const textSpan = cardBody.querySelector('span');
      const selectedAnswer = textSpan ? textSpan.textContent.trim() : cardBody.textContent.trim().replace(/^[✓\s]*/, '').trim();
      userAnswersQuestion2.push(selectedAnswer || "(không chọn)");
    } else {
      const selectedAnswer = card.textContent.trim() || "(không chọn)";
      userAnswersQuestion2.push(selectedAnswer);
    }
  });
  const answers = [];
  const correctAnswers = [];
  correctAnswersQuestion2.forEach((correctAnswer, index) => {
    const selectedAnswer = userAnswersQuestion2[index] || "(không chọn)";
    answers.push(selectedAnswer);
    correctAnswers.push(correctAnswer);
  });
  question2Score = displayComparisonResultsQuestion2(answers, correctAnswers);
  const resultModal = new bootstrap.Modal(document.getElementById('resultModal'));
  resultModal.show();
});

// Display comparison results function
function displayComparisonResultsQuestion2(userAnswers, correctAnswers) {
  const comparisonBody = document.getElementById('comparisonTableBody');
  const totalScoreElement = document.getElementById('totalScore');
  comparisonBody.innerHTML = '';
  let score = 0;
  userAnswers.forEach((userAnswer, index) => {
    const tr = document.createElement('tr');
    const userAnswerTd = document.createElement('td');
    userAnswerTd.innerHTML = '<span class="' + (userAnswer === correctAnswers[index] ? 'correct' : 'incorrect') + '">' + userAnswer + '</span>';
    tr.appendChild(userAnswerTd);
    const correctAnswerTd = document.createElement('td');
    correctAnswerTd.innerHTML = '<span class="correct">' + correctAnswers[index] + '</span>';
    tr.appendChild(correctAnswerTd);
    if (userAnswer === correctAnswers[index]) score++;
    comparisonBody.appendChild(tr);
  });
  totalScoreElement.innerHTML = '<strong>Your score: ' + score + ' / ' + correctAnswers.length + '</strong>';
  return score;
}

// Next button handler
document.getElementById('nextButton').addEventListener('click', function() {
  const nextBtn = document.getElementById('nextButton');
  if (currentSetIndex < questionSets.length - 1) {
    currentSetIndex++;
    renderQuestion2(questionSets[currentSetIndex]);
    if (currentSetIndex === questionSets.length - 1 && nextBtn) {
      nextBtn.textContent = "The end";
    }
  } else if (nextBtn && nextBtn.textContent === 'The end') {
    // Khi đã xong toàn bộ bộ đề upload (Reading Question 2 & 3) -> quay về trang chọn bài Reading
    window.location.href = 'reading_question.html';
  }
});

// Back button handler
document.getElementById('backButton').addEventListener('click', function() {
  if (currentSetIndex > 0) {
    currentSetIndex--;
    renderQuestion2(questionSets[currentSetIndex]);
    if (currentSetIndex !== questionSets.length - 1) {
      document.getElementById('nextButton').textContent = "Next";
    }
  }
});

// Initialize on load
if (document.readyState === 'loading') {
  document.addEventListener('DOMContentLoaded', function() {
    if (questionSets && questionSets.length > 0) renderQuestion2(questionSets[0]);
  });
} else {
  if (questionSets && questionSets.length > 0) renderQuestion2(questionSets[0]);
}


/* MINI_HIPPO_LESSON_DATA_START
{
  "version": 1,
  "lessonType": "reading",
  "part": "2",
  "sets": [
    {
      "id": 1,
      "title": "READING ĐỀ 4 - Question 2",
      "data": {
        "part": 2,
        "title": "READING ĐỀ 4 - Question 2",
        "topic": "My first car",
        "sentences": [
          "I have just passed the test, and I am the proud owner of the driving license",
          "However, I did not have a car and my parents would not let me drive theirs",
          "So, when I saw an advertisement in the local newspaper for a cheap second-hand car, I did not waste time",
          "I called the number in that advert and arranged a meeting to meet the owner on the other side of the town",
          "We agreed on a price and when I handed over the money, he gave me the keys."
        ]
      }
    },
    {
      "id": 2,
      "title": "READING ĐỀ 4 - Question 3",
      "data": {
        "part": 2,
        "title": "READING ĐỀ 4 - Question 3",
        "topic": "Enter the conference hall 3",
        "sentences": [
          "Go to security desk",
          "Show confirming letter to security guard",
          "After security check, you receive visitor's pass",
          "Enter the conference",
          "You can welcome…"
        ]
      }
    },
    {
      "id": 3,
      "title": "READING ĐỀ 3 - Question 2",
      "data": {
        "part": 2,
        "title": "READING ĐỀ 3 - Question 2",
        "topic": "Enter the conference hall 2",
        "sentences": [
          "When you collect you pack, go to the lifts on the right",
          "Take the lift to the third floor and go to the main desk",
          "Show your pass from the conference pack to a member of staff at the desk",
          "He or she will tell you your seat number for the talk at the main hall",
          "Once you are in the hall, someone will help you find your seat"
        ]
      }
    },
    {
      "id": 4,
      "title": "READING ĐỀ 3 - Question 3",
      "data": {
        "part": 2,
        "title": "READING ĐỀ 3 - Question 3",
        "topic": "Natural history center",
        "sentences": [
          "The most important of these is the Natural history center",
          "The entrance of the center is on the town's main square.",
          "When you enter the building from the square, you will see a set of stairs to your left",
          "The ticket office is on the top of these stairs, the staff there are very helpful.",
          "As well as selling tickets, they can provide maps and useful tour information."
        ]
      }
    },
    {
      "id": 5,
      "title": "READING ĐỀ 2 - Question 2",
      "data": {
        "part": 2,
        "title": "READING ĐỀ 2 - Question 2",
        "topic": "Quy trình vào animal hospital",
        "sentences": [
          "When you arrive, go straight to the main office to collect your ticket",
          "You will need to show this to a member of staff at the door before you enter",
          "Inside the building, you will find a photography exhibition on the ground floor",
          "Before you look at the pictures, a guide will tell you about the day’s event",
          "These activities will include playing and feeding the animals."
        ]
      }
    },
    {
      "id": 6,
      "title": "READING ĐỀ 2 - Question 3",
      "data": {
        "part": 2,
        "title": "READING ĐỀ 2 - Question 3",
        "topic": "A famous football player",
        "sentences": [
          "When he was a child, he played for some local teams near his home in Marseille",
          "He then moved away from his home to join Cannes Football Club in the southern France",
          "While he was at that club, people throughout France saw that he was a brilliant player.",
          "After that, he moved to Italy and Spain, where he finished his playing career",
          "Since he retired from playing, he has worked as a football club manager."
        ]
      }
    },
    {
      "id": 7,
      "title": "READING ĐỀ 1 - Question 2",
      "data": {
        "part": 2,
        "title": "READING ĐỀ 1 - Question 2",
        "topic": "Diễn viên nổi tiếng Jay",
        "sentences": [
          "They left their home country and took Jay to live in the United States",
          "He started study at the school in that country, and in his free time he did some strength exercise",
          "Jay was very good at that and he participated in a bodybuilding competition",
          "At one of these events, an actor agent saw him and gave him a starring role",
          "It was a major action movie and he gained famous from that film"
        ]
      }
    },
    {
      "id": 8,
      "title": "READING ĐỀ 1 - Question 3",
      "data": {
        "part": 2,
        "title": "READING ĐỀ 1 - Question 3",
        "topic": "Quy trình trồng khoai",
        "sentences": [
          "All you need is some earth, an old potato and a big spot",
          "An old potato will have little roots, will be a little green, and won't be good for eating",
          "This color means it is perfect for growing, you should put some earth in the pot and dig it deep down",
          "When you've done this, you should water it everyday and place it in a sunny spot",
          "With this care, you should see a potato plant growing after couples of weeks"
        ]
      }
    },
    {
      "id": 9,
      "title": "READING ĐỀ 17 - Question 2",
      "data": {
        "part": 2,
        "title": "READING ĐỀ 17 - Question 2",
        "topic": "Famous singer (1)",
        "sentences": [
          "He is a famous singer who is loved by many people.",
          "Before becoming famous, he studied music at a school when he was 15 years old.",
          "He spent many years practicing and learning how to perform.",
          "His clothing style and performance on stage were very unique.",
          "Because of that, more and more people started to recognize him."
        ]
      }
    },
    {
      "id": 10,
      "title": "READING ĐỀ 17 - Question 3",
      "data": {
        "part": 2,
        "title": "READING ĐỀ 17 - Question 3",
        "topic": "Movies now and then",
        "sentences": [
          "Movies today are very different from movies in the past",
          "In the old days, films were only in black and white, and sometimes even without sound.",
          "In addition to these technological limits, producers had very low budgets.",
          "Because of the lack of money, actors also earn little money from acting.",
          "Nowadays, everything has changed: actors and producers can earn a lot of money from producing films."
        ]
      }
    },
    {
      "id": 11,
      "title": "READING ĐỀ 16 - Question 2",
      "data": {
        "part": 2,
        "title": "READING ĐỀ 16 - Question 2",
        "topic": "New coffee shop (3)",
        "sentences": [
          "When I arrived, the place was very crowded, and the staff were extremely busy on the first day.",
          "Even though it was crowded, the staff still managed to find a table for me.",
          "They handed me the menu, and when I looked through it, I saw quite a variety of dishes.",
          "After checking them all, I decided to order the most expensive sandwich.",
          "It tasted really good with melted cheese on top, and I’ll definitely come back to this place again."
        ]
      }
    },
    {
      "id": 12,
      "title": "READING ĐỀ 16 - Question 3",
      "data": {
        "part": 2,
        "title": "READING ĐỀ 16 - Question 3",
        "topic": "Healthy eating",
        "sentences": [
          "In the past, many meals were high in sugar and unhealthy fats.",
          "Years ago, limited access to fresh produce made healthy eating much more challenging.",
          "Modern diets now emphasize fresh, whole foods instead of processed ones.",
          "Nutritionists today teach people how to create balanced and nutritious meal plans.",
          "Nowadays, mobile apps help users track calories and discover healthy recipes to support better lifestyles."
        ]
      }
    },
    {
      "id": 13,
      "title": "READING ĐỀ 15 - Question 2",
      "data": {
        "part": 2,
        "title": "READING ĐỀ 15 - Question 2",
        "topic": "Tourism",
        "sentences": [
          "Modern tourism now provides far more choices than in the past.",
          "In earlier times, travelers mostly depended on guidebooks and paper maps.",
          "Back then, limited technology also meant that booking options were quite restricted.",
          "Today, online platforms allow people to plan thoroughly and book their trips with ease.",
          "Moreover, local guides now offer personalized tours that give visitors more authentic experiences."
        ]
      }
    },
    {
      "id": 14,
      "title": "READING ĐỀ 15 - Question 3",
      "data": {
        "part": 2,
        "title": "READING ĐỀ 15 - Question 3",
        "topic": "Work",
        "sentences": [
          "The company offers flexible working hours to better support employees’ schedules.",
          "Her white desk stands out in the shared open office.",
          "She uses a planner to organize her tasks throughout the shorter workweek.",
          "At lunchtime, she enjoys a homemade sandwich prepared with fresh ingredients.",
          "In the evenings, they unwind by reading books on productivity and well-being."
        ]
      }
    },
    {
      "id": 15,
      "title": "READING ĐỀ 14 - Question 2",
      "data": {
        "part": 2,
        "title": "READING ĐỀ 14 - Question 2",
        "topic": "End of term project",
        "sentences": [
          "They all have studied several chapters of local history.",
          "Your end-of-term project should focus on at least two of the given topics.",
          "It must include relevant pictures along with your own written text about the subject.",
          "You will then use these pictures and your written work to create a class presentation.",
          "During the presentation, you should summarize your main points, and it should last about five minutes.",
          "Afterward, your classmates will have the opportunity to ask questions, and you will respond to them."
        ]
      }
    },
    {
      "id": 16,
      "title": "READING ĐỀ 14 - Question 3",
      "data": {
        "part": 2,
        "title": "READING ĐỀ 14 - Question 3",
        "topic": "Busy coffee shop",
        "sentences": [
          "The café was very crowded when the customer arrived.",
          "The staff helped them find a table and handed them a menu.",
          "The customer was surprised because the menu was different from what they had expected.",
          "They decided to order the most expensive item — a sandwich.",
          "The customer said the sandwich was delicious and that they would definitely come back again."
        ]
      }
    },
    {
      "id": 17,
      "title": "READING ĐỀ 13 - Question 2",
      "data": {
        "part": 2,
        "title": "READING ĐỀ 13 - Question 2",
        "topic": "Chưa có topic",
        "sentences": [
          "In the past, most workers followed fixed schedules from nine to five.",
          "Because technology was limited, working from home was almost impossible.",
          "Modern offices are now moving toward more flexible ways of working.",
          "Managers now use digital tools to follow project progress remotely.",
          "Many companies today are trying shorter workweeks to increase efficiency."
        ]
      }
    },
    {
      "id": 18,
      "title": "READING ĐỀ 13 - Question 3",
      "data": {
        "part": 2,
        "title": "READING ĐỀ 13 - Question 3",
        "topic": "IoT (Internet of Things)",
        "sentences": [
          "The Internet of Things (IoT) links everyday devices to improve their capabilities.",
          "Early loT devices faced limitations due to slow internet speeds and compatibility challenges.",
          "High development costs previously slowed the widespread adoption of lot technology.",
          "Nowadays, engineers create smart devices for both residential and industrial applications.",
          "Modern loT systems provide real- time data tracking and automation features."
        ]
      }
    },
    {
      "id": 19,
      "title": "READING ĐỀ 12 - Question 2",
      "data": {
        "part": 2,
        "title": "READING ĐỀ 12 - Question 2",
        "topic": "Mae - The Math girl",
        "sentences": [
          "Mae’s father worked as a nurse, and her mother was a teacher.",
          "Her parents motivated Mae to pursue higher education and focus on scientific studies.",
          "Mae worked diligently and achieved several remarkable milestones.",
          "She later joined a team, contributing her skills and knowledge.",
          "Eventually, she had the opportunity to undergo a training program in the United States."
        ]
      }
    },
    {
      "id": 20,
      "title": "READING ĐỀ 12 - Question 3",
      "data": {
        "part": 2,
        "title": "READING ĐỀ 12 - Question 3",
        "topic": "A group presentation",
        "sentences": [
          "First, we prepared the materials for our group presentation.",
          "Then, we presented our topic for 10 minutes.",
          "Throughout the presentation, we used images to explain our ideas.",
          "After the presentation, other students asked questions.",
          "Finally, each group member took turns answering the questions."
        ]
      }
    },
    {
      "id": 21,
      "title": "READING ĐỀ 11 - Question 2",
      "data": {
        "part": 2,
        "title": "READING ĐỀ 11 - Question 2",
        "topic": "The first American woman in space",
        "sentences": [
          "Encouraged by her parents, she decided to study science at university.",
          "Her strong academic record earned her a place in a training program in the United States.",
          "Her passion for space led Mae to join a dedicated research team.",
          "As a member of the team, she traveled into space and carried out numerous experiments.",
          "Some of these experiments involved growing plants and observing animals aboard the spacecraft."
        ]
      }
    },
    {
      "id": 22,
      "title": "READING ĐỀ 11 - Question 3",
      "data": {
        "part": 2,
        "title": "READING ĐỀ 11 - Question 3",
        "topic": "Social media",
        "sentences": [
          "In the past, slow internet speeds made streaming or uploading videos difficult.",
          "Early platforms offered only basic features like text posts and simple images.",
          "Over time, social media platforms have greatly evolved in both design and functionality.",
          "Today's platforms use complex algorithms to personalize and shape each user's feed.",
          "Many influencers now earn income primarily through brand sponsorships and online ads."
        ]
      }
    },
    {
      "id": 23,
      "title": "READING ĐỀ 10 - Question 2",
      "data": {
        "part": 2,
        "title": "READING ĐỀ 10 - Question 2",
        "topic": "Artificial Intelligence",
        "sentences": [
          "Over the past decade, artificial intelligence has revolutionized various industries.",
          "The early Al systems were limited to simple pattern recognition tasks.",
          "High computational costs previously hindered the development of Al.",
          "Nowadays, Al engineers build advanced models for complex tasks such as language translation.",
          "Modern AI tools help businesses to analyze data and make better decisions."
        ]
      }
    },
    {
      "id": 24,
      "title": "READING ĐỀ 10 - Question 3",
      "data": {
        "part": 2,
        "title": "READING ĐỀ 10 - Question 3",
        "topic": "Music show at the park",
        "sentences": [
          "The event was fully planned, financed, and supported by local authorities.",
          "As a result, entry was free, and around five thousand people attended.",
          "Many attendees arrived early and browsed local shops before the event began.",
          "Despite the busy day, workers finished ahead of schedule and watched the famous singer perform.",
          "The two-hour performance thrilled the audience, leaving everyone in high spirits."
        ]
      }
    },
    {
      "id": 25,
      "title": "READING ĐỀ 9 - Question 2",
      "data": {
        "part": 2,
        "title": "READING ĐỀ 9 - Question 2",
        "topic": "Public Transportation (2)",
        "sentences": [
          "Due to budget limitations, many cities had fewer bus routes in the past.",
          "Older buses often lacked air conditioning and comfortable seats.",
          "City buses today are more efficient than those from a decade ago.",
          "Modern buses often use electric power, reducing pollution in urban areas.",
          "Drivers and staff now receive better training to assist passengers."
        ]
      }
    },
    {
      "id": 26,
      "title": "READING ĐỀ 9 - Question 3",
      "data": {
        "part": 2,
        "title": "READING ĐỀ 9 - Question 3",
        "topic": "Neighborhood Festival",
        "sentences": [
          "The festival was held on Friday evening, featuring live music performances.",
          "Around 100 people attended, with Ms. Carter leading the organizing team.",
          "Activities included dance workshops, art displays, and a pet parade.",
          "After the performances, awards were given for the best food stall.",
          "Families stayed late, enjoying food and drinks under colorful lights."
        ]
      }
    },
    {
      "id": 27,
      "title": "READING ĐỀ 8 - Question 2",
      "data": {
        "part": 2,
        "title": "READING ĐỀ 8 - Question 2",
        "topic": "Company wellness day",
        "sentences": [
          "This month, the wellness day took place on Friday, focusing on work-life balance.",
          "More than 50 employees participated, with Mr. Khan leading a workshop on stress relief.",
          "Activities included team yoga, time management seminars, and a group walk.",
          "After the workshops, awards were given for the most creative wellness ideas.",
          "Employees enjoyed healthy snacks and exchanged tips for managing stress."
        ]
      }
    },
    {
      "id": 28,
      "title": "READING ĐỀ 8 - Question 3",
      "data": {
        "part": 2,
        "title": "READING ĐỀ 8 - Question 3",
        "topic": "Workplace evolution",
        "sentences": [
          "Flexible work models are becoming more common in modern workplaces.",
          "Previously, employees were confined to rigid nine-to-five work hours.",
          "Technological restrictions once made remote work a challenge.",
          "Managers now utilize software to monitor project progress remotely.",
          "Today, businesses are exploring shorter workweeks to boost productivity."
        ]
      }
    },
    {
      "id": 29,
      "title": "READING ĐỀ 7 - Question 2",
      "data": {
        "part": 2,
        "title": "READING ĐỀ 7 - Question 2",
        "topic": "A new cafe (1)",
        "sentences": [
          "Last week, I went to a new opening cafe on Corner Street",
          "When I was there, it was very crowded and the staff were very busy on the first day.",
          "Although it was busy, the staff still arranged a table for me.",
          "They gave me the menu and when I looked at it, I saw quite a few dishes.",
          "I chose the most expensive sandwich.",
          "It tasted quite good and I will definitely go back to this place."
        ]
      }
    },
    {
      "id": 30,
      "title": "READING ĐỀ 7 - Question 3",
      "data": {
        "part": 2,
        "title": "READING ĐỀ 7 - Question 3",
        "topic": "Famous singer (2)",
        "sentences": [
          "He is a famous singer who is loved by many fans.",
          "At the age of fifteen, he studied music at a special school.",
          "Before becoming famous, he had to practice very hard every day.",
          "With his unique style and clothes, he soon attracted attention.",
          "Thanks to his talent and personality, he became well- known to a large audience."
        ]
      }
    },
    {
      "id": 31,
      "title": "READING ĐỀ 6 - Question 2",
      "data": {
        "part": 2,
        "title": "READING ĐỀ 6 - Question 2",
        "topic": "Films",
        "sentences": [
          "Old movies were very different from today's movies.",
          "That's because the movies were only in black and white, and sometimes without sound.",
          "Not only did these technological limitations exist, the movies were also low budget.",
          "Due to the lack of money, actors also had few opportunities to earn money through acting.",
          "Now things have changed, actors and filmmakers can earn thousands of dollars from film production."
        ]
      }
    },
    {
      "id": 32,
      "title": "READING ĐỀ 6 - Question 3",
      "data": {
        "part": 2,
        "title": "READING ĐỀ 6 - Question 3",
        "topic": "Weekend activities",
        "sentences": [
          "It was held on Saturday morning, there was a 10 km race for adults.",
          "There were 60 participants, in which Ms. Kamus kept the fastest speed and won.",
          "After she received the prize, the following time was for children's activities.",
          "Activities including football, swimming, skipping rope, and the children played together very happily.",
          "After playing, the children were very hungry and ate with their parents."
        ]
      }
    },
    {
      "id": 33,
      "title": "READING ĐỀ 5 - Question 2",
      "data": {
        "part": 2,
        "title": "READING ĐỀ 5 - Question 2",
        "topic": "Writing about a place",
        "sentences": [
          "Before writing about a place, you need to do some research on it.",
          "It is important to learn about the people and the history there carefully.",
          "Even if you can not visit the place, your writing will still look similar to real experiences.",
          "You should also compare that place with your own country.",
          "Such comparisons will make your writing more interesting and meaningful."
        ]
      }
    },
    {
      "id": 34,
      "title": "READING ĐỀ 5 - Question 3",
      "data": {
        "part": 2,
        "title": "READING ĐỀ 5 - Question 3",
        "topic": "Public transportation (1)",
        "sentences": [
          "In the past, transportation was only available to the rich",
          "Then, fast air travel became popular among business people",
          "Later, buses and trains were introduced as cheaper alternatives",
          "They made transportation more convenient for everyone",
          "Today, buses and trains are two of the most common forms of transport."
        ]
      }
    }
  ]
}
MINI_HIPPO_LESSON_DATA_END */
