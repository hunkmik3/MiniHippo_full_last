<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mini Hippo - Reading Practice Set</title>
    <link rel="icon" href="images/favicon.ico" type="image/x-icon">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">
    <link rel="stylesheet" href="css/lesson-ui.css">
    <link rel="stylesheet" href="css/readingkey.css">
    <style>
        body {
            background: #f7f9fc;
        }
        .practice-section {
            display: none;
        }
        .practice-section.active {
            display: block;
        }
        .loading-state {
            min-height: 50vh;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-direction: column;
            gap: 1rem;
        }
        .draggable-card {
            background: #fff;
            border-radius: 0.75rem;
            padding: 1rem;
            border: 1px solid #e2e8f0;
            margin-bottom: 0.75rem;
            cursor: grab;
            box-shadow: 0 10px 20px rgba(15, 23, 42, 0.05);
        }
        .sortable-ghost {
            opacity: 0.4;
        }
        .option-select {
            min-width: 180px;
        }
        .practice-feedback {
            margin-top: 1.5rem;
        }
        #part5-paragraph-container.collapsed {
            display: none;
        }
    </style>
</head>
<body>
    <div class="header d-flex justify-content-between align-items-center p-3 bg-primary text-white shadow">
        <div class="d-flex align-items-center">
            <a href="reading_bode.html" class="me-3 text-decoration-none text-white fs-4 d-flex align-items-center">
                <i class="bi bi-house-door-fill me-2 fs-5"></i>
                <span class="fw-bold">Mini Hippo</span>
            </a>
        </div>
        <div class="d-flex align-items-center">
            <span class="time-remaining-label me-2 fs-6">Time remaining:</span>
            <span class="countdown fs-4 fw-bold" id="countdownTimer">35:00</span>
        </div>
        <div id="question_step" class="fs-5 fw-bold text-light">
            Reading Practice Set
        </div>
    </div>

    <main class="py-4">
        <div class="container my-4" id="loadingState">
            <div class="loading-state">
                <div class="spinner-border text-primary" role="status"></div>
                <p class="text-muted mb-0">Đang tải bộ đề...</p>
            </div>
        </div>

        <div id="practiceContent" style="display: none;">
            <!-- Part 1 -->
            <section id="part1-section" class="practice-section active">
                <div id="question1" class="container py-5">
                    <h1 class="mb-4"><strong>Question 1 of 4</strong></h1>
                    <p class="mb-4 text-muted" id="part1-intro"></p>
                    <form id="part1-form">
                        <div id="part1-questions"></div>
                    </form>
                    <div class="alert alert-info d-none practice-feedback" id="part1-feedback"></div>
                </div>
            </section>

            <!-- Part 2 -->
            <section id="part2-section" class="practice-section">
                <div id="question2" class="container py-5 main-content">
                    <div class="justify-content-between">
                        <h1 class="mb-3" id="part2-heading"><strong>Question 2 of 4</strong></h1>
                        <p class="text-muted mb-4">Reading Question 2 &amp; 3 · Arrange the sentences to build two short texts.</p>
                    </div>

                    <div class="card shadow-sm border-0 mb-4" id="reading-question2-block">
                        <div class="card-body">
                            <div class="d-flex flex-column flex-md-row justify-content-between align-items-md-center gap-3 mb-3">
                                <h5 class="mb-0">Question 2</h5>
                                <span id="part2-topic" class="text-danger fw-semibold text-md-end"></span>
                            </div>
                            <p class="text-muted small mb-3">Put the sentences below in the right order. The first sentence is done for you.</p>
                            <div id="cardsContainerQ2"></div>
                        </div>
                    </div>

                    <div class="card shadow-sm border-0" id="reading-question3-block">
                        <div class="card-body">
                            <div class="d-flex flex-column flex-md-row justify-content-between align-items-md-center gap-3 mb-3">
                                <h5 class="mb-0">Question 3</h5>
                                <span id="part3-topic" class="text-danger fw-semibold text-md-end"></span>
                            </div>
                            <p class="text-muted small mb-3">Put the sentences below in the right order. The first sentence is done for you.</p>
                            <div id="cardsContainerQ3"></div>
                        </div>
                    </div>

                    <div class="alert alert-info d-none practice-feedback mt-4" id="part2-feedback"></div>
                </div>
            </section>

            <!-- Part 4 -->
            <section id="part4-section" class="practice-section">
                <div id="question4" class="container py-5">
                    <h1 class="mb-4"><strong>Question 3 of 4</strong></h1>
                    <h4 id="part4-topic" class="mb-4 text-danger fw-semibold"></h4>
                    <div class="row">
                        <div class="col-md-7" id="part4-paragraphs"></div>
                        <div class="col-md-5">
                            <p class="fw-bold" id="part4-intro"></p>
                            <form id="part4-form"></form>
                        </div>

                    </div>
                    <div class="alert alert-info d-none practice-feedback" id="part4-feedback"></div>
                </div>
            </section>

            <!-- Part 5 -->
            <section id="part5-section" class="practice-section">
                <div id="question5" class="container my-4">
                    <div class="custom-header mb-4 d-flex flex-column flex-md-row align-items-md-center justify-content-between gap-3">
                        <div>
                            <h1 class="mb-2"><strong>Question 4 of 4</strong></h1>
                            <h4 id="part5-topic" class="mb-0 text-danger fw-semibold"></h4>
                        </div>
                        <div class="d-flex gap-2">
                            <button class="btn btn-secondary" id="togglePart5ContentBtn">Xem nội dung</button>
                            <button class="btn btn-secondary" id="showPart5TipsBtn">Xem mẹo</button>
                        </div>
                    </div>
                    <div id="part5-paragraph-container" class="collapsed">
                        <div class="row gy-3" id="part5-paragraphs"></div>
                    </div>
                    <div class="alert alert-info d-none practice-feedback" id="part5-feedback"></div>
                </div>
            </section>
        </div>
    </main>

    <div id="result_navigation" class="container mt-4" style="display: none;">
        <div class="card shadow-sm border-0 mb-4">
            <div class="card-body text-center">
                <p class="text-muted mb-1" id="resultTitle">Test and Answer Review</p>
                <h4 id="totalScore">Total Score: 0 / 0</h4>
                <h5 id="scoreClassification">Your grade: A1</h5>
                <div class="d-flex justify-content-center gap-2 mt-3 flex-wrap">
                    <button class="btn btn-outline-primary btn-active" id="navQ1" data-review-target="comparisonResult_question1">1</button>
                    <button class="btn btn-outline-primary" id="navQ2" data-review-target="comparisonResult_question2">2</button>
                    <button class="btn btn-outline-primary" id="navQ3" data-review-target="comparisonResult_question3">3</button>
                    <button class="btn btn-outline-primary" id="navQ4" data-review-target="comparisonResult_question4">4</button>
                </div>
            </div>
        </div>
    </div>

    <div class="container" id="comparisonResult_question1" style="display: none;">
        <h3>Question 1</h3>
        <p id="totalScore_question1"></p>
        <table class="table table-striped">
            <thead>
                <tr>
                    <th>Your Answer</th>
                    <th>Correct Answer</th>
                </tr>
            </thead>
            <tbody id="comparisonBody_question1"></tbody>
        </table>
    </div>

    <div class="container" id="comparisonResult_question2" style="display: none;">
        <h3>Question 2 &amp; 3</h3>
        <p id="totalScore_question2"></p>
        <div id="comparisonBody_question2" class="d-flex flex-column gap-4"></div>
    </div>

    <div class="container" id="comparisonResult_question3" style="display: none;">
        <h3>Question 3</h3>
        <p id="totalScore_question3"></p>
        <table class="table table-striped">
            <thead>
                <tr>
                    <th>Question</th>
                    <th>Your Answer</th>
                    <th>Correct Answer</th>
                </tr>
            </thead>
            <tbody id="comparisonBody_question3"></tbody>
        </table>
    </div>

    <div class="container" id="comparisonResult_question4" style="display: none;">
        <h3>Question 4</h3>
        <p id="totalScore_question4"></p>
        <table class="table table-striped">
            <thead>
                <tr>
                    <th>Paragraph</th>
                    <th>Your Heading</th>
                    <th>Correct Heading</th>
                </tr>
            </thead>
            <tbody id="comparisonBody_question4"></tbody>
        </table>
    </div>

    <div class="footer" id="navigator" style="display: none;">
        <button class="btn btn-back" id="backButton">Back</button>
        <button class="btn btn-next" id="nextButton">Next</button>
    </div>

    <!-- Submit Modal -->
    <div class="modal fade" id="submitModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Nộp bài</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    Bạn đã hoàn thành toàn bộ bộ đề. Bạn có muốn xem lại câu trả lời trước khi kết thúc không?
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Xem lại</button>
                    <button type="button" class="btn btn-primary" id="confirmSubmitBtn">Kết thúc</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Part 5 tips modal -->
    <div class="modal fade" id="part5TipsModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Mẹo học Question 5</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <h6 class="fw-semibold mb-2">Keyword</h6>
                    <p id="part5-keyword" class="mb-3"></p>
                    <h6 class="fw-semibold mb-2">Nhớ theo đoạn văn</h6>
                    <p id="part5-meo" class="mb-0"></p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Đóng</button>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sortablejs@1.15.0/Sortable.min.js"></script>
<script src="js/auth.js"></script>
    <script src="js/reading_bode_set.js"></script>
</body>
</html>


